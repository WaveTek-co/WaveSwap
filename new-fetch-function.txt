// Direct confidential balances fetch (no authentication required - following Encifher examples)
  const fetchSessionBasedBalances = async () => {
    if (!publicKey) {
      console.error('[SwapComponent] Wallet not connected')
      return
    }

    setIsLoadingConfidentialBalances(true)
    try {
      console.log('[SwapComponent] üîÑ Fetching confidential balances directly (no auth required):', publicKey.toString())

      // Following Encifher examples - just call the API with public key, no signing needed
      const balanceResponse = await fetch(
        `/api/v1/confidential/authenticated-balances?userPublicKey=${encodeURIComponent(publicKey.toString())}`
      )

      if (balanceResponse.ok) {
        const balanceData = await balanceResponse.json()
        console.log('[SwapComponent] ‚úÖ Successfully fetched confidential balances:', balanceData)

        // Set the confidential balances
        if (balanceData.success && balanceData.confidentialBalances) {
          setAuthenticatedBalances(balanceData.confidentialBalances)
          console.log('[SwapComponent] ‚úÖ Set authenticated balances:', balanceData.confidentialBalances.length, 'tokens')
        } else {
          console.log('[SwapComponent] No confidential balances found')
          setAuthenticatedBalances([])
        }
      } else {
        const errorText = await balanceResponse.text()
        console.error('[SwapComponent] Failed to fetch confidential balances:', balanceResponse.status, errorText)
        setAuthenticatedBalances([])
      }

    } catch (error) {
      console.error('[SwapComponent] ‚ùå Failed to fetch confidential balances:', error)
      setAuthenticatedBalances([])
    } finally {
      setIsLoadingConfidentialBalances(false)
    }
  }